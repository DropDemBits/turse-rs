---
source: compiler/toc_analysis/src/typeck/test.rs
assertion_line: 42
expression: "var *_ : boolean\n\nmodule m\n    export opaque e, var a\n    type e : enum(a)\n    var a : e := e.a\n\n    _ := e.a = a\n\n    % should give a not usable as ty error\n    type not_ty : e.a\nend m\n\nvar u : m.e := m.e.a\n_ := m.e.a = u\ntype no_field : m.e.a\n"

---
"_"@(FileId(1), 5..6) [Declared]: boolean
"m"@(FileId(1), 25..26) [Declared]: <error>
"a"@(FileId(1), 72..73) [Declared]: enum[DefId(LibraryId(0), LocalDefId(3))] ( "a"@(FileId(1), 72..73), )
"e"@(FileId(1), 67..74) [Declared]: <error>
"e"@(FileId(1), 63..64) [Resolved(Type)]: opaque[DefId(LibraryId(0), LocalDefId(4))] type to enum[DefId(LibraryId(0), LocalDefId(3))] ( "a"@(FileId(1), 72..73), )
"a"@(FileId(1), 83..84) [Declared]: opaque[DefId(LibraryId(0), LocalDefId(4))] type to enum[DefId(LibraryId(0), LocalDefId(3))] ( "a"@(FileId(1), 72..73), )
"not_ty"@(FileId(1), 167..173) [Resolved(Type)]: alias[DefId(LibraryId(0), LocalDefId(6))] of <error>
"e"@(FileId(1), 38..46) [ItemExport(LocalDefId(4))]: opaque[DefId(LibraryId(0), LocalDefId(4))] type to enum[DefId(LibraryId(0), LocalDefId(3))] ( "a"@(FileId(1), 72..73), )
"a"@(FileId(1), 48..53) [ItemExport(LocalDefId(5))]: opaque[DefId(LibraryId(0), LocalDefId(4))] type to enum[DefId(LibraryId(0), LocalDefId(3))] ( "a"@(FileId(1), 72..73), )
"u"@(FileId(1), 191..192) [Declared]: opaque[DefId(LibraryId(0), LocalDefId(4))] type to enum[DefId(LibraryId(0), LocalDefId(3))] ( "a"@(FileId(1), 72..73), )
"no_field"@(FileId(1), 228..236) [Resolved(Type)]: alias[DefId(LibraryId(0), LocalDefId(10))] of <error>
"<root>"@(dummy) [Declared]: <error>

error in file FileId(1) at 178..179: cannot use `a` as a type alias
| error in file FileId(1) for 178..179: `a` is a reference to an enum variant, not a type
| note in file FileId(1) for 72..73: `a` declared here
error in file FileId(1) at 206..207: no field named `a` in expression
| error in file FileId(1) for 206..207: no field named `a` in here
error in file FileId(1) at 217..218: no field named `a` in expression
| error in file FileId(1) for 217..218: no field named `a` in here
error in file FileId(1) at 243..244: no field named `a` in `e`
| error in file FileId(1) for 243..244: no field named `a` in here
